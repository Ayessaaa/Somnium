<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/output.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Poppins";
      }
    </style>
  </head>
  <body
    class="px-10 py-5 bg-gradient-to-r to-blue-50 from-violet-50 via-pink-50"
  >
    <% var objToday = new Date(), weekday = new Array('Sunday', 'Monday',
    'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'), dayOfWeek =
    weekday[objToday.getDay()], dayOfMonth = today + ( objToday.getDate() < 10)
    ? '0' + objToday.getDate() + domEnder : objToday.getDate() , months = new
    Array('January', 'February', 'March', 'April', 'May', 'June', 'July',
    'August', 'September', 'October', 'November', 'December'), curMonth =
    months[objToday.getMonth()], curYear = objToday.getFullYear(); var today =
    curMonth + " " + dayOfMonth + ", " + curYear; %> <% var todayLink =
    "/editEntry/"+curMonth + "-" + dayOfMonth + "-" + curYear + "-" + dayOfWeek
    %>
    <div
      class="w-2/6 mx-auto rounded-xl p-3 flex place-items-center font-medium px-12 gap-12 *:py-1 *:rounded-full *:transition-all"
    >
      <button
        onclick="home()"
        class="basis-2/6 flex justify-center items-center gap-3 font-semibold text-violet-700 shadow-lg shadow-violet-500/20 bg-violet-100 hover:scale-105 hover:bg-violet-500 hover:shadow-violet-500/50 hover:text-white active:bg-violet-600"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-5 inline stroke-2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
          />
        </svg>
        <span>Home</span>
      </button>
      <button
        onclick="window.location.href = '<%= todayLink %>'"
        class="basis-2/6 flex justify-center items-center gap-3 text-sky-600 hover:bg-white hover:shadow-sm active:bg-sky-200 hover:scale-105"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-5 inline"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"
          />
        </svg>
        <span>Journal</span>
      </button>
      <button
        onclick="calendar()"
        class="basis-2/6 flex justify-center items-center gap-3 text-blue-600 hover:bg-white hover:shadow-sm active:bg-blue-200 hover:scale-105"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-5 inline"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"
          />
        </svg>
        <span>Calendar</span>
      </button>
    </div>
    <div class="hover:scale-105 transition-all w-fit mx-auto mt-10">
      <p class="font-bold text-6xl text-center mt-5 drop-shadow-lg text-white">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-14 inline stroke-2 stroke-yellow-500"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"
          />
        </svg>
        <span
          class="text-transparent bg-clip-text bg-gradient-to-r from-violet-500 via-purple-400 to-blue-500"
          >Somnium.</span
        >
      </p>
      <div
        class="rounded-xl border-yellow-400 font-semibold tracking-wide text-slate-800 px-5 text-right drop-shadow-lg"
      >
        dream journal
      </div>
    </div>

    <div class="w-2/6 mx-auto mt-14">
      <p class="font-bold text-2xl text-violet-500">
        Good Morning, <span class="text-violet-600">Yessa!</span>
      </p>
      <p class="font-medium text-blue-400 text-sm">
        How was your sleep, <span class="text-yellow-500">sleepyhead</span> zzz
      </p>
    </div>

    <div
      class="col-span-2 w-2/6 bg-blue-100 bg-gradient-to-t from-blue-500 via-blue-400 to-blue-300 rounded-lg p-3 shadow-lg mx-auto mt-5"
    >
      <p
        class="mx-auto font-bold text-lg bg-clip-text text-transparent bg-gradient-to-tr w-fit from-indigo-700 to-sky-500"
      >
        Sleep History
      </p>
      <canvas id="myChart" class="mt-3"></canvas>
    </div>

    <div class="w-2/6 mx-auto gap-5 grid grid-cols-2 mt-5">
      <div class="bg-white rounded-lg p-3 pb-4">
        <p class="font-bold text text-center text-slate-700 mt-4">
          Did you have a dream today?
        </p>
        <p class="font-medium text-slate-500 text-xs text-center">
          <%= today %>
        </p>

        <div class="grid grid-cols-2 mt-8 gap-5 mx-3">
          <button
            onclick="window.location.href = '<%= todayLink %>'"
            class="bg-green-100 rounded-lg pt-2 hover:scale-105 transition-all hover:bg-green-500 group hover:shadow-lg"
          >
            <div class="flex justify-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-8 stroke-2 stroke-green-600 group-hover:stroke-white"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                />
              </svg>
            </div>

            <div
              class="bg-slate-700 rounded-b-lg mt-1 p-1 group-hover:bg-slate-800"
            >
              <p class="font-semibold -mt-1 text-white">yes</p>
            </div>
          </button>

          <button
            class="bg-red-100 rounded-lg pt-2 hover:scale-105 transition-all hover:bg-red-500 group hover:shadow-lg"
          >
            <div class="flex justify-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-8 stroke-2 stroke-red-600 group-hover:stroke-white"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                />
              </svg>
            </div>

            <div
              class="bg-slate-700 rounded-b-lg mt-1 p-1 group-hover:bg-slate-800"
            >
              <p class="font-semibold -mt-1 text-white">no</p>
            </div>
          </button>
        </div>
      </div>

      <div
        class="bg-white rounded-lg p-3 bg-gradient-to-t pb-4 to-violet-300 from-violet-500"
      >
        <p
          class="mx-auto font-bold text-lg bg-clip-text text-transparent bg-gradient-to-tr w-fit from-violet-700 to-purple-500"
        >
          Dream Count
        </p>
        <canvas id="barChart" class="mt-3"></canvas>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <% 
    sleepArray = []
    sleep.forEach(element => {
      sleepArray.push(element.hour)
    }); 

    dateArray = []
    sleep.forEach(element => {
      dateArray.push(element.date)
    }); 
    %>

    <script>
      Chart.defaults.color = "white";
      Chart.defaults.font.family = "Poppins";
      const ctx = document.getElementById("myChart");
      const bar = document.getElementById("barChart");

      

      new Chart(ctx, {
        type: "line",
        data: {
          labels: ['<%- dateArray[6].replace("December", "Dec") %>',
                  '<%- dateArray[5].replace("December", "Dec") %>',
                  '<%- dateArray[4].replace("December", "Dec") %>',
                  '<%- dateArray[3].replace("December", "Dec") %>',
                  '<%- dateArray[2].replace("December", "Dec") %>',
                  '<%- dateArray[1].replace("December", "Dec") %>',
                  '<%- dateArray[0].replace("December", "Dec") %>'],
          datasets: [
            {
              label: " Sleep Hours (hrs)",
              data: ['<%- sleepArray[6] %>',
                  '<%- sleepArray[5] %>',
                  '<%- sleepArray[4] %>',
                  '<%- sleepArray[3] %>',
                  '<%- sleepArray[2] %>',
                  '<%- sleepArray[1] %>',
                  '<%- sleepArray[0] %>'],
              borderWidth: 1,
              tension: 0.5,
              borderWidth: 3,
              borderColor: "white",
              color: "white",
            },
          ],
        },
        options: {
          plugins: {
            legend: {
              labels: {
                // This more specific font property overrides the global property
                font: {
                  size: 11,
                },
              },
            },
          },
          scales: {
            x: {
              grid: {
                color: "rgba(255, 255, 255, .2)",
              },
            },
            y: {
              beginAtZero: true,
              grid: {
                color: "rgba(255, 255, 255, .2)",
              },
            },
          },
        },
      });

      new Chart(bar, {
        type: "bar",
        data: {
          labels: ["Sept", "Oct", "Nov", "Dec"],
          datasets: [
            {
              label: " Dreams this Month",
              data: [10, 12, 21, 15],
              borderWidth: 1,
              tension: 0.5,
              borderWidth: 3,
              borderColor: "white",
              color: "white",
            },
          ],
        },
        options: {
          plugins: {
            legend: {
              labels: {
                // This more specific font property overrides the global property
                font: {
                  size: 11,
                },
              },
            },
          },
          scales: {
            x: {
              grid: {
                color: "rgba(255, 255, 255, .2)",
              },
            },
            y: {
              beginAtZero: true,
              grid: {
                color: "rgba(255, 255, 255, .2)",
              },
            },
          },
        },
      });

      function home() {
        window.location.href = "home";
      }
      function calendar() {
        window.location.href = "calendar";
      }
    </script>
  </body>
</html>
